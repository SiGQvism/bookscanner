<!-- ① OpenCV の <script> をコメントアウト  -->
<!-- <script async src="https://docs.opencv.org/4.x/opencv.js"></script> -->

<script>
  /* ② OpenCV フラグと canvas 関連を丸ごと削除  */
  // let cvReady = false; ...
  // offCanvas なども不要

  /* ③ ZXing だけでデコード */
  const reader = new ZXing.BrowserMultiFormatReader({ delayBetweenScanAttempts: 250 });

  async function startCamera(){
    ...
    reader.decodeFromVideoDevice(deviceId, videoEl, (result, err, ctrl)=>{
      if(result){            // 🎯 ここで ISBN を取得
        ctrl.stop();
        onDetect(result.text);
      }
    });
  }
</script>
